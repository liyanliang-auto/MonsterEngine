# MonsterEngine 日志系统使用说明

## 设置日志输出等级

### 方法 1：使用全局设置函数（推荐）

在 `main.cpp` 中，`InitializeLogging()` 之后调用：

```cpp
// 只输出 Error 级别及以上的日志
SetGlobalLogVerbosity(ELogVerbosity::Error);
```

**支持的日志等级**（从高到低）：
- `ELogVerbosity::NoLogging` - 禁用日志
- `ELogVerbosity::Fatal` - 致命错误（会导致程序崩溃）
- `ELogVerbosity::Error` - 错误
- `ELogVerbosity::Warning` - 警告
- `ELogVerbosity::Display` - 显示消息
- `ELogVerbosity::Log` - 普通日志
- `ELogVerbosity::Verbose` - 详细日志
- `ELogVerbosity::VeryVerbose` - 非常详细的日志

### 方法 2：单独设置某个日志类别

```cpp
// 只设置特定类别的日志等级
LogVulkan.SetVerbosity(ELogVerbosity::Error);
LogRenderer.SetVerbosity(ELogVerbosity::Warning);
```

**全局日志类别**：
- `LogTemp` - 临时日志（默认类别）
- `LogCore` - 核心系统
- `LogInit` - 初始化
- `LogExit` - 退出
- `LogMemory` - 内存管理
- `LogRenderer` - 渲染器
- `LogRHI` - 渲染硬件接口
- `LogVulkan` - Vulkan API
- `LogShaders` - 着色器
- `LogTextures` - 纹理
- `LogPlatform` - 平台
- `LogWindow` - 窗口
- `LogInput` - 输入

### 当前配置

在 `e:\MonsterEngine\main.cpp:73` 已设置：

```cpp
SetGlobalLogVerbosity(ELogVerbosity::Error);
```

这会将所有全局日志类别设置为只输出 Error 及以上级别的日志。

## 注意事项

### 静态局部日志类别

有些日志类别是用 `DEFINE_LOG_CATEGORY_STATIC` 在源文件中定义的静态局部类别，例如：
- `LogCubeSceneApp`
- `LogScene`
- `LogCubeActor`
- `LogOpenGL`
- 等等...

这些**无法从 main.cpp 设置**，因为它们的作用域仅限于定义它们的源文件。

如果需要控制这些日志的输出，有两种方法：

1. **修改源文件中的默认等级**：
   ```cpp
   // 在源文件中修改
   DEFINE_LOG_CATEGORY_STATIC(LogCubeSceneApp, Error, All);  // 改为 Error
   ```

2. **将静态类别改为全局类别**：
   - 在头文件中声明：`DECLARE_LOG_CATEGORY_EXTERN(LogCubeSceneApp, Error, All)`
   - 在源文件中定义：`DEFINE_LOG_CATEGORY(LogCubeSceneApp)`
   - 然后可以在 main.cpp 中设置

## 使用示例

```cpp
// 在代码中使用日志
MR_LOG(LogRenderer, Error, "Failed to create texture: %s", textureName);
MR_LOG(LogVulkan, Warning, "Validation layer warning");
MR_LOG(LogCore, Log, "System initialized");  // 设置为 Error 后不会输出

// 使用便捷宏（使用 LogTemp 类别）
MR_LOG_ERROR("Something went wrong!");
MR_LOG_WARNING("Be careful!");
MR_LOG_INFO("Information");  // 设置为 Error 后不会输出
```

## 日志输出位置

日志会输出到以下位置：
1. **控制台** - 彩色输出，Error 为红色，Warning 为黄色
2. **文件** - `e:\MonsterEngine\log\MonsterEngine.log`
3. **调试器** - Visual Studio 的输出窗口（OutputDebugString）

## 运行时调整

如果需要在程序运行时动态调整日志等级，可以：

```cpp
// 在任何地方调用
LogVulkan.SetVerbosity(ELogVerbosity::Verbose);  // 临时启用详细日志
// ... 调试代码 ...
LogVulkan.SetVerbosity(ELogVerbosity::Error);    // 恢复为 Error
```
